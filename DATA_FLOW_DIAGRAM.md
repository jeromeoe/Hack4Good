# ğŸ”„ DATA FLOW DIAGRAM

## System Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         SUPABASE DATABASE                       â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   profiles   â”‚  â”‚  activities  â”‚  â”‚ activity_         â”‚   â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚ registrations     â”‚   â”‚
â”‚  â”‚ â€¢ id (uuid)  â”‚  â”‚ â€¢ id         â”‚  â”‚ â€¢ id              â”‚   â”‚
â”‚  â”‚ â€¢ email      â”‚  â”‚ â€¢ title      â”‚  â”‚ â€¢ activity_id     â”‚   â”‚
â”‚  â”‚ â€¢ role       â”‚  â”‚ â€¢ date       â”‚  â”‚ â€¢ participant_id  â”‚   â”‚
â”‚  â”‚ â€¢ full_name  â”‚  â”‚ â€¢ time_start â”‚  â”‚ â€¢ status          â”‚   â”‚
â”‚  â”‚ â€¢ disability â”‚  â”‚ â€¢ time_end   â”‚  â”‚                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â€¢ location   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                    â”‚ â€¢ meeting_   â”‚                           â”‚
â”‚                    â”‚   location   â”‚                           â”‚
â”‚                    â”‚ â€¢ participantâ”‚                           â”‚
â”‚                    â”‚   _slots     â”‚                           â”‚
â”‚                    â”‚ â€¢ disability â”‚                           â”‚
â”‚                    â”‚   _access    â”‚                           â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                           â”‚
        â–¼                                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STAFF PORTAL   â”‚                        â”‚ PARTICIPANT     â”‚
â”‚                 â”‚                        â”‚ PORTAL          â”‚
â”‚  Create/Edit    â”‚                        â”‚                 â”‚
â”‚  Activities     â”‚                        â”‚  View/Register  â”‚
â”‚                 â”‚                        â”‚  for Activities â”‚
â”‚  Form Fields:   â”‚                        â”‚                 â”‚
â”‚  â€¢ Title        â”‚                        â”‚  Display:       â”‚
â”‚  â€¢ Date         â”‚                        â”‚  â€¢ Title        â”‚
â”‚  â€¢ Time Start   â”‚                        â”‚  â€¢ Start/End    â”‚
â”‚  â€¢ Time End     â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º   â”‚  â€¢ Location     â”‚
â”‚  â€¢ Location     â”‚    Data Mapping        â”‚  â€¢ Meeting Pt   â”‚
â”‚  â€¢ Meeting Loc  â”‚                        â”‚  â€¢ Description  â”‚
â”‚  â€¢ Part. Slots  â”‚                        â”‚  â€¢ Capacity     â”‚
â”‚  â€¢ Disability   â”‚                        â”‚  â€¢ Access.      â”‚
â”‚    Access       â”‚                        â”‚                 â”‚
â”‚  â€¢ Comments     â”‚                        â”‚  Actions:       â”‚
â”‚                 â”‚                        â”‚  â€¢ Register     â”‚
â”‚                 â”‚                        â”‚  â€¢ View Details â”‚
â”‚                 â”‚                        â”‚  â€¢ Filter       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Staff Creates Activity Flow

```
1. Staff fills form
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Title: Art Workshop                â”‚
   â”‚ Date: 2025-02-15                   â”‚
   â”‚ Time: 14:00 - 16:00                â”‚
   â”‚ Location: Arts Centre              â”‚
   â”‚ Meeting: Main entrance             â”‚
   â”‚ Participants: 20                   â”‚
   â”‚ Access: Universal                  â”‚
   â”‚ Notes: Bring art supplies          â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
2. Save to database
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ INSERT INTO activities             â”‚
   â”‚ (title, date, time_start, ...)     â”‚
   â”‚ VALUES ('Art Workshop', ...)       â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
3. Participant queries
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ SELECT * FROM activities           â”‚
   â”‚ WHERE date >= CURRENT_DATE         â”‚
   â”‚ ORDER BY date ASC                  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
4. Data mapping (participantHooks.ts)
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ convertDBActivityToApp()           â”‚
   â”‚                                    â”‚
   â”‚ date + time_start                  â”‚
   â”‚   â†’ startISO                       â”‚
   â”‚                                    â”‚
   â”‚ date + time_end                    â”‚
   â”‚   â†’ endISO                         â”‚
   â”‚                                    â”‚
   â”‚ meeting_location                   â”‚
   â”‚   â†’ meetingPoint                   â”‚
   â”‚                                    â”‚
   â”‚ participant_slots                  â”‚
   â”‚   â†’ capacity                       â”‚
   â”‚                                    â”‚
   â”‚ disability_access                  â”‚
   â”‚   â†’ accessibility.*                â”‚
   â”‚   â†’ suitableFor[]                  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
5. Rendered in UI
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Calendar Card:                     â”‚
   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
   â”‚ â”‚ Art Workshop         Available â”‚ â”‚
   â”‚ â”‚ 2:00 PM â€“ 4:00 PM             â”‚ â”‚
   â”‚ â”‚ Arts Centre                    â”‚ â”‚
   â”‚ â”‚ 0/20 registered                â”‚ â”‚
   â”‚ â”‚                                â”‚ â”‚
   â”‚ â”‚ â™¿ Universal access             â”‚ â”‚
   â”‚ â”‚                                â”‚ â”‚
   â”‚ â”‚ [Register] [Details]           â”‚ â”‚
   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Participant Registers Flow

```
1. Click Register
   â”‚
   â–¼
2. Validation checks
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ â€¢ User authenticated?          â”‚
   â”‚ â€¢ Activity at capacity?        â”‚
   â”‚ â€¢ Schedule conflict?           â”‚
   â”‚ â€¢ Weekly limit (3)?            â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚
   â”œâ”€ FAIL â”€â–º Show error message
   â”‚
   â””â”€ PASS
      â”‚
      â–¼
3. Insert registration
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ INSERT INTO                    â”‚
   â”‚ activity_registrations         â”‚
   â”‚ (activity_id,                  â”‚
   â”‚  participant_id,               â”‚
   â”‚  status)                       â”‚
   â”‚ VALUES (123, 'uuid', 'reg...')â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
4. Update UI
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ â€¢ Badge: "âœ“ Registered"       â”‚
   â”‚ â€¢ Count: "1/20 registered"    â”‚
   â”‚ â€¢ Add to "My Activities"      â”‚
   â”‚ â€¢ Update weekly count         â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Accessibility Mapping Flow

```
Staff selects:              Converts to:
disability_access
      â”‚
      â”œâ”€ "Universal" â”€â”€â”€â”€â”€â”€â”€â”€â–º accessibility: {
      â”‚                          wheelchairAccessible: âœ“
      â”‚                          visuallyImpairedFriendly: âœ“
      â”‚                          hearingImpairedFriendly: âœ“
      â”‚                          intellectualDisability: âœ“
      â”‚                          autismFriendly: âœ“
      â”‚                        }
      â”‚                        suitableFor: [
      â”‚                          "Physical Disability",
      â”‚                          "Visual Impairment",
      â”‚                          "Hearing Impairment",
      â”‚                          "Intellectual Disability",
      â”‚                          "Autism Spectrum",
      â”‚                          "Multiple Disabilities",
      â”‚                          "Other"
      â”‚                        ]
      â”‚
      â”œâ”€ "Wheelchair" â”€â”€â”€â”€â”€â”€â”€â–º accessibility: {
      â”‚   "Friendly"             wheelchairAccessible: âœ“
      â”‚                          [others]: âœ—
      â”‚                        }
      â”‚                        suitableFor: [
      â”‚                          "Physical Disability",
      â”‚                          "Multiple Disabilities"
      â”‚                        ]
      â”‚
      â”œâ”€ "Sensory" â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º accessibility: {
      â”‚   "Friendly"             visuallyImpairedFriendly: âœ“
      â”‚                          hearingImpairedFriendly: âœ“
      â”‚                          autismFriendly: âœ“
      â”‚                          [others]: âœ—
      â”‚                        }
      â”‚                        suitableFor: [
      â”‚                          "Autism Spectrum",
      â”‚                          "Visual Impairment",
      â”‚                          "Hearing Impairment"
      â”‚                        ]
      â”‚
      â””â”€ "Ambulant" â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º accessibility: {
                                 [all]: âœ—
                               }
                               suitableFor: [
                                 "Visual Impairment",
                                 "Hearing Impairment",
                                 "Intellectual Disability",
                                 "Other"
                               ]
```

---

## Date & Time Handling

```
Database stores:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ date: "2025-02-15"        â”‚
â”‚ time_start: "14:00"       â”‚
â”‚ time_end: "16:00"         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
Conversion (Singapore Time UTC+8):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ startISO = date + "T" + time_start     â”‚
â”‚          + ":00+08:00"                 â”‚
â”‚        = "2025-02-15T14:00:00+08:00"  â”‚
â”‚                                        â”‚
â”‚ endISO = date + "T" + time_end         â”‚
â”‚        + ":00+08:00"                   â”‚
â”‚        = "2025-02-15T16:00:00+08:00"  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
Display to user:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Saturday, 15 February 2025â”‚
â”‚ 2:00 PM â€“ 4:00 PM         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Conflict Detection

```
User wants to register for Activity B
         â”‚
         â–¼
1. Get Activity B times
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ B: 3:00 PM - 5:00 PM    â”‚
   â”‚    (Feb 15, 2025)        â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
2. Get user's registered activities
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ A: 2:00 PM - 4:00 PM    â”‚
   â”‚    (Feb 15, 2025)        â”‚
   â”‚                          â”‚
   â”‚ C: 6:00 PM - 8:00 PM    â”‚
   â”‚    (Feb 15, 2025)        â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
3. Check overlaps
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚                                  â”‚
   â”‚ Timeline Feb 15:                 â”‚
   â”‚ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” â”‚
   â”‚ 2PM   3PM   4PM   5PM   6PM  8PMâ”‚
   â”‚ [====A====]                      â”‚ â† Registered
   â”‚       [====B====]                â”‚ â† Trying to add
   â”‚                     [====C====]  â”‚ â† Registered
   â”‚                                  â”‚
   â”‚ A overlaps with B? YES! âš ï¸       â”‚
   â”‚ (3:00 PM is between 2-4 PM)     â”‚
   â”‚                                  â”‚
   â”‚ B overlaps with C? NO âœ“          â”‚
   â”‚ (5:00 PM before 6:00 PM)        â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
4. Show warning
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ âš ï¸ Clash detected:       â”‚
   â”‚ This activity overlaps   â”‚
   â”‚ with another registered  â”‚
   â”‚ activity.                â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Weekly Count Calculation

```
1. Get current week range
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Week: Jan 19-25, 2026   â”‚
   â”‚ Start: Jan 19, 00:00    â”‚
   â”‚ End: Jan 25, 23:59      â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
2. Find user's registrations
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ SELECT activity_id       â”‚
   â”‚ FROM registrations       â”‚
   â”‚ WHERE participant_id=X   â”‚
   â”‚   AND status='registered'â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
3. Filter by date range
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ SELECT COUNT(*)          â”‚
   â”‚ FROM activities          â”‚
   â”‚ WHERE id IN (...)        â”‚
   â”‚   AND date >= '2026-01-19'â”‚
   â”‚   AND date <= '2026-01-25'â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
4. Display count
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ You have 2 activities    â”‚
   â”‚ this week (1 slot left)  â”‚
   â”‚                          â”‚
   â”‚ If 3: Weekly limit       â”‚
   â”‚       reached âš ï¸         â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Complete Request Lifecycle

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  USER ACTION                         â”‚
â”‚         (Click "Register" on activity)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              FRONTEND (React)                        â”‚
â”‚  â€¢ toggleRegistration() called                       â”‚
â”‚  â€¢ Check hasClash                                    â”‚
â”‚  â€¢ Check weeklyCount >= 3                           â”‚
â”‚  â€¢ Call registerForActivity()                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        PARTICIPANT HOOKS (Data Layer)                â”‚
â”‚  â€¢ Get current user                                  â”‚
â”‚  â€¢ Check activity capacity                           â”‚
â”‚  â€¢ Count current registrations                       â”‚
â”‚  â€¢ Determine status (registered/waitlisted)          â”‚
â”‚  â€¢ Insert into activity_registrations                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         SUPABASE (Database)                          â”‚
â”‚  â€¢ Validate foreign keys                             â”‚
â”‚  â€¢ Check RLS policies                                â”‚
â”‚  â€¢ Execute INSERT                                    â”‚
â”‚  â€¢ Return success/error                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              RESPONSE FLOW                           â”‚
â”‚  â€¢ Success returned to hooks                         â”‚
â”‚  â€¢ Hooks refresh activities                          â”‚
â”‚  â€¢ Context updates state                             â”‚
â”‚  â€¢ UI re-renders with new data                       â”‚
â”‚  â€¢ Toast notification shown                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

This visual guide shows exactly how data flows through the system! ğŸ“Š
